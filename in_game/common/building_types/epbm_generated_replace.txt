# Auto-generated by tools/generate_building_hooks.py
# REPLACE blocks for buildings with existing on_built/on_destroyed hooks

# monastery uses monastery_maintenance (REPLACE due to existing on_built)
REPLACE:monastery = {
	is_foreign = no
	max_levels = 1
	pop_type = clergy
	
	employment_size = large_religious_building_employment
	
	category = religious_category
	
	rural_settlement = yes
	town = yes
	city = yes
	
	build_time = religious_building_time
	graphical_tags = { medium_religious }
	
	
	country_potential = {
		modifier:can_have_monasteries = yes
	}
	
	possible_production_methods = {
		monastery_maintenance
		hab_reformed_monastery_maintenance
		composite_nature_maintenance
		single_nature_maintenance
		dual_nature_maintenance
		separate_nature_maintenance
	}
	
	on_built = {
		if = {
			limit = {
				location.owner = { 
					religion = { has_sects = yes }
					is_member_of_international_organization_of_type = { type = sect }
				}
			}
			location.owner = {
				random_international_organizations_member_of = {
					limit = { 
						international_organization_type = international_organization_type:sect
						NOT = {	any_international_organization_enemy = { this = root.owner } }
						NOT = { has_location = root.location }
					}
					add_location_to_international_organization = root.location
				}
			}
		}
	
		# EPBM: Track building for maintenance
		location = { add_to_variable_list = { name = epbm_building_types target = prev } }
		epbm_on_building_built = yes
	}

	construction_demand = town_building_construction
	
	modifier = {
		local_clergy_food_consumption = 0.1
		local_clergy_max_literacy = 10
		local_pop_conversion_speed_modifier = 0.1
	}

	on_destroyed = {
		# EPBM: Untrack building
		location = { remove_list_variable = { name = epbm_building_types target = prev } }
		epbm_on_building_destroyed = yes
	}
}
