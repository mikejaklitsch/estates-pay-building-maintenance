# Auto-generated by tools/generate_building_hooks.py
# Per-PM scripted effects for add/remove maintenance goods
# Uses hardcoded goods names to avoid $PARAM$ issues with variable_map()

# admiralty_requirements
# Used by: admiralty
# Goods: tools 0.1, naval_supplies 0.2, fine_cloth 0.2, books 0.1, paper 0.3
epbm_add_admiralty_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.3 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.3 }
	}
}

epbm_remove_admiralty_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.3 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# armory_maintenance
# Used by: armory
# Goods: firearms 0.5, leather 0.5, cloth 0.1, paper 0.2, weaponry 0.5
epbm_add_armory_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
}

epbm_remove_armory_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# art_school_maintenance
# Used by: art_school
# Goods: paper 0.3, dyes 0.1, marble 0.1, books 0.2
epbm_add_art_school_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.3 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.3 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:dyes } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:dyes)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:dyes value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:dyes value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.2 }
	}
}

epbm_remove_art_school_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.3 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:dyes } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:dyes)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:dyes value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# arts_academy_maintenance
# Used by: arts_academy, imperial_academy_of_arts, royal_academy_of_arts
# Goods: paper 0.6, dyes 0.2, marble 0.2, books 0.4
epbm_add_arts_academy_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.6 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.6 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:dyes } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:dyes)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:dyes value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:dyes value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.4 }
	}
}

epbm_remove_arts_academy_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.6 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:dyes } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:dyes)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:dyes value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bailiff_input
# Used by: bailiff
# Goods: paper 0.1, tools 0.15, weaponry 0.25, stone 0.1
epbm_add_bailiff_input = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.15 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.15 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
}

epbm_remove_bailiff_input = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.15 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bajang_ratu_maintenance
# Used by: bajang_ratu
# Goods: stone 0.1, goods_gold 0.05, gems 0.1, tools 0.1, weaponry 0.2
epbm_add_bajang_ratu_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:gems } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:gems)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:gems value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:gems value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.2 }
	}
}

epbm_remove_bajang_ratu_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:gems } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:gems)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:gems value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# barcelona_royal_shipyard
# Used by: barcelona_royal_shipyard
# Goods: tar 0.4, naval_supplies 1.0, tools 0.25, lumber 0.4, stone 0.2
epbm_add_barcelona_royal_shipyard = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.2 }
	}
}

epbm_remove_barcelona_royal_shipyard = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# barracks_maintenance
# Used by: barracks
# Goods: firearms 1.0, leather 1.0, cloth 0.2, paper 0.4, weaponry 1.0
epbm_add_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 1.0 }
	}
}

epbm_remove_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# basic_castle_maintenance
# Used by: castel_sant_angelo, fortezza_di_sant_andrea, hexamilion_wall, hsa_burgtor, kastellet, kronborg, oma_nizwa_fort, red_fort, theodosian_walls, tower_of_belem, walls_of_benin, walls_of_ston, zazzau_walls
# Goods: stone 0.05, tools 0.05, weaponry 0.05, tar 0.02
epbm_add_basic_castle_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.02 }
	}
}

epbm_remove_basic_castle_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bastion_maintenance
# Used by: bastion
# Goods: stone 0.5, firearms 0.5, cannons 0.5, tools 0.2, weaponry 0.5
epbm_add_bastion_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
}

epbm_remove_bastion_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bey_fortress_maintenance
# Used by: bey_fortress
# Goods: stone 0.1, tools 0.1, weaponry 0.2, tar 0.1
epbm_add_bey_fortress_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.1 }
	}
}

epbm_remove_bey_fortress_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bibliotheca_corviniana_maintenance
# Used by: bibliotheca_corviniana
# Goods: paper 0.2, books 1.0, furniture 0.1
epbm_add_bibliotheca_corviniana_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
}

epbm_remove_bibliotheca_corviniana_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bolshoi_theater_maintenance
# Used by: bolshoi_theater
# Goods: cloth 0.1, furniture 0.1, liquor 0.5, paper 0.5, fine_cloth 0.4, fur 0.1
epbm_add_bolshoi_theater_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:liquor } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:liquor)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fur } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fur)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fur value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fur value = 0.1 }
	}
}

epbm_remove_bolshoi_theater_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:liquor } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:liquor)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fur } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fur)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fur value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# brethren_marsh_maintenance
# Used by: brethren_marsh
# Goods: tar 0.1, naval_supplies 0.25, tools 0.1, lumber 0.1
epbm_add_brethren_marsh_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
}

epbm_remove_brethren_marsh_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bridge_maintenance
# Used by: bridge_infrastructure
# Goods: lumber 0.05, stone 0.1, tools 0.02
epbm_add_bridge_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.02 }
	}
}

epbm_remove_bridge_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# brothel_maintenance
# Used by: brothel
# Goods: medicaments 0.05, liquor 0.2, paper 0.05, cloth 0.1
epbm_add_brothel_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:medicaments } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:medicaments)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:liquor } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:liquor)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
}

epbm_remove_brothel_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:medicaments } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:medicaments)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:liquor } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:liquor)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bubu_building_maintenance
# Used by: bubu_building
# Goods: tools 0.03
epbm_add_bubu_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.03 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.03 }
	}
}

epbm_remove_bubu_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.03 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# bund_maintenance
# Used by: bund
# Goods: tools 0.1
epbm_add_bund_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
}

epbm_remove_bund_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# cahokia_woodhenge_production_method
# Used by: woodhenge_of_cahokia
# Goods: clay 1.0, lumber 1.0
epbm_add_cahokia_woodhenge_production_method = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:clay } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:clay)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:clay value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:clay value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 1.0 }
	}
}

epbm_remove_cahokia_woodhenge_production_method = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:clay } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:clay)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:clay value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# capital_administration_maintenance
# Used by: camara_comptos, lieutenancy
# Goods: tools 0.1, fine_cloth 0.25, paper 0.5, furniture 0.1, goods_gold 0.1
epbm_add_capital_administration_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
}

epbm_remove_capital_administration_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# capital_building_maintenance
# Used by: ambras_castle, belvedere_palace, city_of_victory, doges_palace, el_escorial_palace, forbidden_city, general_archive_of_simancas, husuni_kubwa, imperial_city_of_hue, munich_residenz_baroque_expansion, piazza_san_marco, quirinal_palace, sanssouci, schonbrunn_palace, sco_palace_of_holyroodhouse, versailles
# Goods: furniture 0.1, tools 0.1, porcelain 0.2, glass 0.5, fine_cloth 0.5, books 0.1, ivory 0.2, goods_gold 0.1, marble 0.2
epbm_add_capital_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:porcelain } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:porcelain)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:porcelain value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:porcelain value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:ivory } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:ivory)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:ivory value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:ivory value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.2 }
	}
}

epbm_remove_capital_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:porcelain } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:porcelain)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:porcelain value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:ivory } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:ivory)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:ivory value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# caravan_stop_maintenance
# Used by: caravan_stop
# Goods: goods_gold 0.01, salt 0.01
epbm_add_caravan_stop_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.01 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:salt value = 0.01 }
	}
}

epbm_remove_caravan_stop_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# caravanserai_maintenance
# Used by: caravanserai
# Goods: jewelry 0.01, cloth 0.01
epbm_add_caravanserai_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = 0.01 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.01 }
	}
}

epbm_remove_caravanserai_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# castle_maintenance
# Used by: castle
# Goods: stone 0.1, tools 0.05, weaponry 0.1, tar 0.025
epbm_add_castle_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.025 }
	}
}

epbm_remove_castle_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# cathedral_maintenance
# Used by: cathedral
# Goods: glass 0.05, cloth 0.05, fine_cloth 0.025, paper 0.1, copper 0.05, tools 0.05
epbm_add_cathedral_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.025 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:copper value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
}

epbm_remove_cathedral_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# cawa_barracks_maintenance
# Used by: cawa_barracks
# Goods: leather 0.5, cloth 0.1, weaponry 0.5
epbm_add_cawa_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
}

epbm_remove_cawa_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# chancery_maintenance
# Used by: chancery
# Goods: fine_cloth 0.1, books 0.1, paper 0.5, goods_gold 0.05
epbm_add_chancery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.05 }
	}
}

epbm_remove_chancery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# coastal_fort_maintenance
# Used by: coastal_fort
# Goods: stone 0.2, firearms 0.2, cannons 0.5, tools 0.2, tar 0.2
epbm_add_coastal_fort_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.2 }
	}
}

epbm_remove_coastal_fort_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# college_of_poets_maintenance
# Used by: college_of_poets
# Goods: paper 1.0, books 0.5, glass 0.5
epbm_add_college_of_poets_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.5 }
	}
}

epbm_remove_college_of_poets_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# colony_maintenance
# Used by: coastal_settlements, fulani_cattle_rearing_pen, settlement_building
# Goods: stone 0.1, lumber 0.1, wild_game 0.1, wool 0.1
epbm_add_colony_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wild_game } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wild_game)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:wild_game value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:wild_game value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wool } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wool)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:wool value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:wool value = 0.1 }
	}
}

epbm_remove_colony_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wild_game } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wild_game)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:wild_game value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wool } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wool)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:wool value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# commerce_center_maintenance
# Used by: commerce_center
# Goods: cloth 0.1, jewelry 0.1, paper 0.1, salt 0.1, beeswax 0.02
epbm_add_commerce_center_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:salt value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.02 }
	}
}

epbm_remove_commerce_center_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# confucian_academy_maintenance
# Used by: confucian_academy
# Goods: paper 0.4, beeswax 0.1, books 0.2, cloth 0.3, fine_cloth 0.1
epbm_add_confucian_academy_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.3 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.3 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.1 }
	}
}

epbm_remove_confucian_academy_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.3 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# confucian_school_maintenance
# Used by: confucian_school
# Goods: paper 0.1, cloth 0.2
epbm_add_confucian_school_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
}

epbm_remove_confucian_school_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# conscription_center_maintenance
# Used by: conscription_center
# Goods: firearms 1.0, leather 1.0, cloth 0.2, paper 0.5, weaponry 1.0
epbm_add_conscription_center_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 1.0 }
	}
}

epbm_remove_conscription_center_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# construction_center_maintenance
# Used by: construction_center
# Goods: masonry 0.2, tools 0.25
epbm_add_construction_center_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.25 }
	}
}

epbm_remove_construction_center_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# copenhagen_dockyard_maintenance
# Used by: copenhagen_dockyard
# Goods: tar 0.4, naval_supplies 0.8, tools 0.2, lumber 1.0
epbm_add_copenhagen_dockyard_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.8 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.8 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 1.0 }
	}
}

epbm_remove_copenhagen_dockyard_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.8 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# counting_house_maintenance
# Used by: counting_house
# Goods: paper 0.2, books 0.05, goods_gold 0.05, tools 0.1
epbm_add_counting_house_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
}

epbm_remove_counting_house_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# dock_maintenance
# Used by: dock
# Goods: tar 0.2, naval_supplies 0.1, tools 0.2, lumber 0.2
epbm_add_dock_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
}

epbm_remove_dock_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# dry_dock_maintenance
# Used by: dry_dock
# Goods: tar 0.4, naval_supplies 0.2, tools 0.4, lumber 0.4
epbm_add_dry_dock_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.4 }
	}
}

epbm_remove_dry_dock_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# dun_fort_maintenance
# Used by: dun_fort
# Goods: stone 0.15
epbm_add_dun_fort_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.15 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.15 }
	}
}

epbm_remove_dun_fort_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.15 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# early_capital_building_maintenance
# Used by: alhambra, berlin_palace, grand_palace, munich_residenz_founding, munich_residenz_renaissance_expansion, rock_of_monaco, uffizi, zwinger
# Goods: furniture 0.1, tools 0.1, glass 0.5, fine_cloth 0.5, books 0.1, goods_gold 0.1, marble 0.1
epbm_add_early_capital_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.1 }
	}
}

epbm_remove_early_capital_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# early_soldier_building_maintenance
# Used by: city_guard, jurchen_barracks, kalari, kremlin, kurmina_headquarter, sergeantry, sofa_barracks, the_bock_fortifications, thema_headquarters
# Goods: leather 0.5, cloth 0.1, paper 0.2, weaponry 0.5
epbm_add_early_soldier_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
}

epbm_remove_early_soldier_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# eghabho_nore_mansion_maintenance
# Used by: eghabho_nore_mansion
# Goods: lumber 0.2, masonry 0.5, paper 0.05
epbm_add_eghabho_nore_mansion_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.05 }
	}
}

epbm_remove_eghabho_nore_mansion_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# endrun_academy_maintenance
# Used by: enderun_academy
# Goods: firearms 0.5, leather 0.5, cloth 0.25, paper 0.5, weaponry 0.5, fine_cloth 0.5
epbm_add_endrun_academy_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.5 }
	}
}

epbm_remove_endrun_academy_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# expensive_capital_administration_maintenance
# Used by: viceroyalty
# Goods: tools 0.1, fine_cloth 0.5, paper 2.0, furniture 0.25, goods_gold 0.1
epbm_add_expensive_capital_administration_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
}

epbm_remove_expensive_capital_administration_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# fortress_church_maintenance
# Used by: fortress_church
# Goods: stone 0.1, weaponry 0.02, cloth 0.05, books 0.01, copper 0.025, tin 0.01
epbm_add_fortress_church_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.01 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:copper value = 0.025 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tin } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tin)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:tin value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tin value = 0.01 }
	}
}

epbm_remove_fortress_church_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tin } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tin)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tin value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# fortress_granary_maintenance
# Used by: fortress_granary
# Goods: wheat 0.1, masonry 0.1, weaponry 0.02, cloth 0.05, copper 0.025, tin 0.01
epbm_add_fortress_granary_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wheat } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wheat)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:wheat value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:wheat value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:copper value = 0.025 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tin } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tin)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:tin value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tin value = 0.01 }
	}
}

epbm_remove_fortress_granary_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wheat } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wheat)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:wheat value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tin } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tin)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tin value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# fortress_maintenance
# Used by: fortress
# Goods: stone 2.0, firearms 4.0, cannons 4.0, tools 2.0, weaponry 2.0
epbm_add_fortress_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 4.0 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 4.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp add = 4.0 }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = 4.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 2.0 }
	}
}

epbm_remove_fortress_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 4.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp subtract = 4.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# funduq_maintenance
# Used by: funduq
# Goods: books 0.05, paper 0.2, jewelry 0.01, fine_cloth 0.01
epbm_add_funduq_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = 0.01 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.01 }
	}
}

epbm_remove_funduq_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# galley_barracks_maintenance
# Used by: galley_barracks
# Goods: tools 0.5, slaves_goods 0.5
epbm_add_galley_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:slaves_goods } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:slaves_goods)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = 0.5 }
	}
}

epbm_remove_galley_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:slaves_goods } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:slaves_goods)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# ghilman_barracks_maintenance
# Used by: ghilman_barracks
# Goods: firearms 0.5, leather 0.5, cloth 0.1, paper 0.2, weaponry 0.5, slaves_goods 0.5
epbm_add_ghilman_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:slaves_goods } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:slaves_goods)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = 0.5 }
	}
}

epbm_remove_ghilman_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:slaves_goods } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:slaves_goods)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# globe_theater_maintenance
# Used by: globe_theatre
# Goods: cloth 0.2, furniture 0.1, wine 0.3, paper 0.5, fine_cloth 0.4
epbm_add_globe_theater_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wine } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wine)" }
		change_local_variable = { name = epbm_temp add = 0.3 }
		add_to_variable_map = { name = epbm_maint key = goods:wine value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:wine value = 0.3 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.4 }
	}
}

epbm_remove_globe_theater_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wine } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wine)" }
		change_local_variable = { name = epbm_temp subtract = 0.3 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:wine value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# granary_maintenance
# Used by: granary
# Goods: masonry 0.2
epbm_add_granary_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.2 }
	}
}

epbm_remove_granary_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# grand_apartment_maintenance
# Used by: grand_apartment
# Goods: furniture 0.1, books 0.1, marble 0.05
epbm_add_grand_apartment_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.05 }
	}
}

epbm_remove_grand_apartment_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# grand_marketplace_maintenance
# Used by: grand_marketplace
# Goods: cloth 0.1, jewelry 0.1, paper 0.1, salt 0.1, beeswax 0.04
epbm_add_grand_marketplace_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:salt value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.04 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.04 }
	}
}

epbm_remove_grand_marketplace_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.04 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# grand_shipyard_maintenance
# Used by: grand_shipyard
# Goods: tar 1.6, naval_supplies 0.8, tools 1.6, lumber 1.6
epbm_add_grand_shipyard_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 1.6 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 1.6 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.8 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.8 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 1.6 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 1.6 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 1.6 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 1.6 }
	}
}

epbm_remove_grand_shipyard_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 1.6 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.8 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 1.6 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 1.6 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# great_madrasa_maintenance
# Used by: great_madrasa
# Goods: paper 0.5, cloth 0.4
epbm_add_great_madrasa_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.4 }
	}
}

epbm_remove_great_madrasa_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# great_zimbabwe_maintenance
# Used by: great_enclosure, great_hill_complex, great_valley_complex
# Goods: lumber 0.2, tools 0.1, goods_gold 0.1, ivory 0.1
epbm_add_great_zimbabwe_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:ivory } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:ivory)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:ivory value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:ivory value = 0.1 }
	}
}

epbm_remove_great_zimbabwe_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:ivory } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:ivory)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:ivory value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# guich_garrison_maintenance
# Used by: guich_garrison
# Goods: masonry 0.1, weaponry 0.02, tar 0.02
epbm_add_guich_garrison_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.02 }
	}
}

epbm_remove_guich_garrison_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# herrenchiemsee_abbey_maintenance
# Used by: herrenchiemsee_abbey
# Goods: glass 0.4, paper 0.4, cloth 0.4, beer 0.4, beeswax 0.2
epbm_add_herrenchiemsee_abbey_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beer } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beer)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:beer value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beer value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.2 }
	}
}

epbm_remove_herrenchiemsee_abbey_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beer } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beer)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beer value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# hospital_maintenance
# Used by: charite_of_berlin, darussifa, hospital, magistrato_alla_sanita
# Goods: fiber_crops 0.1, tools 0.02, paper 0.1, books 0.05, medicaments 0.02, mercury 0.01
epbm_add_hospital_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fiber_crops } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fiber_crops)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:medicaments } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:medicaments)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:mercury } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:mercury)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:mercury value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:mercury value = 0.01 }
	}
}

epbm_remove_hospital_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fiber_crops } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fiber_crops)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:medicaments } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:medicaments)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:mercury } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:mercury)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:mercury value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# house_of_parliament_requirements
# Used by: house_of_parliament
# Goods: fine_cloth 0.1, books 0.1, paper 0.5
epbm_add_house_of_parliament_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
}

epbm_remove_house_of_parliament_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# ibadat_khana_maintenance
# Used by: ibadat_khana
# Goods: paper 0.5, books 1.0, furniture 0.2
epbm_add_ibadat_khana_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.2 }
	}
}

epbm_remove_ibadat_khana_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# imperial_halic_shipyards_maintenance
# Used by: imperial_halic_shipyards
# Goods: tar 0.5, naval_supplies 1.0, tools 0.2, lumber 0.4, stone 0.24
epbm_add_imperial_halic_shipyards_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.24 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.24 }
	}
}

epbm_remove_imperial_halic_shipyards_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.24 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# incamisana_maintennace
# Used by: incamisana
# Goods: stone 0.02
epbm_add_incamisana_maintennace = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.02 }
	}
}

epbm_remove_incamisana_maintennace = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# irrigation_maintenance
# Used by: irrigation_systems
# Goods: tools 0.1
epbm_add_irrigation_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
}

epbm_remove_irrigation_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# janissary_barracks_maintenance
# Used by: janissary_barracks
# Goods: firearms 0.5, leather 0.5, cloth 0.1, paper 0.2, weaponry 0.5, slaves_goods 0.5
epbm_add_janissary_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:slaves_goods } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:slaves_goods)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = 0.5 }
	}
}

epbm_remove_janissary_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:slaves_goods } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:slaves_goods)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# jesuit_college_maintenance
# Used by: jesuit_college
# Goods: paper 0.5, books 1.0, fine_cloth 0.2, beeswax 0.1
epbm_add_jesuit_college_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.1 }
	}
}

epbm_remove_jesuit_college_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# jewish_district_maintenance
# Used by: jewish_district
# Goods: masonry 0.5, tools 0.1, glass 0.2, furniture 0.1, lumber 0.25
epbm_add_jewish_district_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.25 }
	}
}

epbm_remove_jewish_district_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# khmer_baray_maintenance
# Used by: khmer_baray
# Goods: lumber 0.2, tools 0.5, clay 0.2, stone 0.2
epbm_add_khmer_baray_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:clay } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:clay)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:clay value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:clay value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.2 }
	}
}

epbm_remove_khmer_baray_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:clay } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:clay)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:clay value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# kings_manor_maintenance
# Used by: kings_manor
# Goods: tools 0.1, masonry 0.2, weaponry 0.1, paper 0.5, furniture 0.25, fine_cloth 0.25
epbm_add_kings_manor_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.25 }
	}
}

epbm_remove_kings_manor_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# korean_gunnery_maintenance
# Used by: korean_gunnery_coastal_defense, korean_gunnery_land_defense
# Goods: stone 0.05, firearms 0.1, cannons 0.1, tools 0.05
epbm_add_korean_gunnery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
}

epbm_remove_korean_gunnery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# kurultai_maintenance
# Used by: kurultai
# Goods: horses 0.2, leather 0.05, weaponry 0.02
epbm_add_kurultai_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:horses } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:horses)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:horses value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:horses value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.02 }
	}
}

epbm_remove_kurultai_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:horses } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:horses)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:horses value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# lazaretto_maintenance
# Used by: lazaretto
# Goods: fiber_crops 0.15, books 0.05, medicaments 0.03
epbm_add_lazaretto_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fiber_crops } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fiber_crops)" }
		change_local_variable = { name = epbm_temp add = 0.15 }
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = 0.15 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:medicaments } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:medicaments)" }
		change_local_variable = { name = epbm_temp add = 0.03 }
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = 0.03 }
	}
}

epbm_remove_lazaretto_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fiber_crops } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fiber_crops)" }
		change_local_variable = { name = epbm_temp subtract = 0.15 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:medicaments } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:medicaments)" }
		change_local_variable = { name = epbm_temp subtract = 0.03 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:medicaments value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# library_maintenance
# Used by: adm_vatican_library, al_azhar_madrasa, bardic_school, bavarian_academy_of_sciences, constantinople_observatory, dip_vatican_library, fra_louvre_museum, library, library_of_vijayanagar, mahmud_gawan_madrasa, mil_vatican_library, papal_archives, royal_audience_and_chancery, school_of_salamanca, the_cipher_secretary
# Goods: paper 0.1, books 0.25
epbm_add_library_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.25 }
	}
}

epbm_remove_library_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# lighthouse_of_alexandria_maintenance
# Used by: lighthouse_of_alexandria
# Goods: masonry 0.5, weaponry 0.2, naval_supplies 0.5, tar 0.1
epbm_add_lighthouse_of_alexandria_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.1 }
	}
}

epbm_remove_lighthouse_of_alexandria_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# local_governor_maintenance
# Used by: local_governor
# Goods: tools 1.0, masonry 1.0, weaponry 0.5, paper 3.0, books 1.0, goods_gold 1.0, furniture 2.0, fine_cloth 1.0
epbm_add_local_governor_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 3.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 3.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 1.0 }
	}
}

epbm_remove_local_governor_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 3.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# local_smelters_maintenance
# Used by: local_smelters
# Goods: tools 0.025, lumber 0.05, coal 0.05
epbm_add_local_smelters_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.025 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:coal } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:coal)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:coal value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:coal value = 0.05 }
	}
}

epbm_remove_local_smelters_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:coal } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:coal)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:coal value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# madrasa_maintenance
# Used by: madrasa
# Goods: paper 0.1, cloth 0.2
epbm_add_madrasa_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
}

epbm_remove_madrasa_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# mamluk_barracks_maintenance
# Used by: mamluk_barracks
# Goods: leather 1.0, cloth 0.2, weaponry 0.5, slaves_goods 0.5
epbm_add_mamluk_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:slaves_goods } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:slaves_goods)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = 0.5 }
	}
}

epbm_remove_mamluk_barracks_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:slaves_goods } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:slaves_goods)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:slaves_goods value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# market_center_building_maintenance
# Used by: clearing_house, customs_house, entrepot, stock_exchange, trading_hub
# Goods: lumber 0.2, stone 0.2, tools 0.2, paper 2.0, salt 0.2, pottery 0.2
epbm_add_market_center_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:salt value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:pottery } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:pottery)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:pottery value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:pottery value = 0.2 }
	}
}

epbm_remove_market_center_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:pottery } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:pottery)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:pottery value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# marketplace_maintenance
# Used by: marketplace
# Goods: cloth 0.05, jewelry 0.05, paper 0.05, beeswax 0.02, salt 0.05
epbm_add_marketplace_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:salt value = 0.05 }
	}
}

epbm_remove_marketplace_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# merchants_quarters_maintenance
# Used by: merchants_quarters
# Goods: cloth 0.075, jewelry 0.075, paper 0.075, salt 0.075, beeswax 0.03
epbm_add_merchants_quarters_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.075 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.075 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp add = 0.075 }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = 0.075 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.075 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.075 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp add = 0.075 }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:salt value = 0.075 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.03 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.03 }
	}
}

epbm_remove_merchants_quarters_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.075 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp subtract = 0.075 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.075 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp subtract = 0.075 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.03 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# mercury_patio_maintenance
# Used by: mercury_patio
# Goods: mercury 1.0
epbm_add_mercury_patio_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:mercury } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:mercury)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:mercury value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:mercury value = 1.0 }
	}
}

epbm_remove_mercury_patio_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:mercury } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:mercury)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:mercury value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# mint_maintenance
# Used by: minting_office
# Goods: goods_gold 0.1, silver 0.1, copper 0.25, tin 0.1
epbm_add_mint_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:silver } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:silver)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:silver value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:silver value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:copper value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tin } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tin)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tin value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tin value = 0.1 }
	}
}

epbm_remove_mint_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:silver } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:silver)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:silver value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tin } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tin)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tin value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# monastery_maintenance
# Used by: debere_meshwae, miaphysite_monastery, monastery, novodevichy_convent, orthodox_monastery, sufi_mosque, wali_songo_shrine
# Goods: glass 0.025, paper 0.025, cloth 0.025, beer 0.1, beeswax 0.05
epbm_add_monastery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.025 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.025 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.025 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beer } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beer)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:beer value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beer value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.05 }
	}
}

epbm_remove_monastery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beer } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beer)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beer value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# moscow_artillery_yard_maintenance
# Used by: moscow_artillery_yard
# Goods: leather 2.0, paper 1.0, tools 0.5, cannons 2.0, horses 1.0
epbm_add_moscow_artillery_yard_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:horses } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:horses)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:horses value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:horses value = 1.0 }
	}
}

epbm_remove_moscow_artillery_yard_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:horses } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:horses)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:horses value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# nahuatl_warrior_building_maintenance
# Used by: calmecac, telpochcalli, warrior_temple
# Goods: weaponry 1.0
epbm_add_nahuatl_warrior_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 1.0 }
	}
}

epbm_remove_nahuatl_warrior_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# naval_base_maintenance
# Used by: naval_base
# Goods: tar 3.0, naval_supplies 1.5, tools 3.0, lumber 3.0
epbm_add_naval_base_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 3.0 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 3.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 1.5 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 1.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 3.0 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 3.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 3.0 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 3.0 }
	}
}

epbm_remove_naval_base_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 3.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 1.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 3.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 3.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# naval_battery_maintenance
# Used by: naval_battery
# Goods: stone 0.2, firearms 0.2, cannons 1.0, tools 0.5, tar 0.2
epbm_add_naval_battery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.2 }
	}
}

epbm_remove_naval_battery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# naval_governor_maintenance
# Used by: naval_governor
# Goods: tools 1.0, masonry 1.0, weaponry 0.5, paper 3.0, books 1.0, goods_gold 1.0, furniture 2.0, naval_supplies 0.5, fine_cloth 0.5
epbm_add_naval_governor_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 3.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 3.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.5 }
	}
}

epbm_remove_naval_governor_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 3.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# north_sea_shipyards_maintenance
# Used by: north_sea_shipyards
# Goods: tar 0.4, naval_supplies 0.8, tools 0.2, lumber 1.0
epbm_add_north_sea_shipyards_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.8 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.8 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 1.0 }
	}
}

epbm_remove_north_sea_shipyards_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.8 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# oma_falaj_maintenance
# Used by: oma_falaj
# Goods: stone 0.02
epbm_add_oma_falaj_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.02 }
	}
}

epbm_remove_oma_falaj_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# opera_house_maintenance
# Used by: opera_house
# Goods: cloth 0.6, wine 0.6, paper 0.6, lacquerware 0.2, fine_cloth 0.1, beeswax 0.2
epbm_add_opera_house_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.6 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.6 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wine } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wine)" }
		change_local_variable = { name = epbm_temp add = 0.6 }
		add_to_variable_map = { name = epbm_maint key = goods:wine value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:wine value = 0.6 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.6 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.6 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lacquerware } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lacquerware)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lacquerware value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lacquerware value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.2 }
	}
}

epbm_remove_opera_house_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.6 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wine } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wine)" }
		change_local_variable = { name = epbm_temp subtract = 0.6 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:wine value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.6 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lacquerware } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lacquerware)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lacquerware value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# order_commandery_maintenance
# Used by: order_stronghold
# Goods: stone 0.01, weaponry 0.05, paper 0.02
epbm_add_order_commandery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.01 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.02 }
	}
}

epbm_remove_order_commandery_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# order_headquarters_requirements
# Used by: order_headquarters
# Goods: lumber 0.1, tools 0.1, glass 0.1, fine_cloth 0.1, beeswax 0.05, books 0.05, weaponry 0.1
epbm_add_order_headquarters_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.1 }
	}
}

epbm_remove_order_headquarters_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# ostrog_maintenance
# Used by: ostrog
# Goods: lumber 0.2, tools 0.1, firearms 0.2, weaponry 0.2, tar 0.1
epbm_add_ostrog_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.1 }
	}
}

epbm_remove_ostrog_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# peel_towers_maintenance
# Used by: peel_towers
# Goods: stone 0.2, weaponry 0.2, tar 0.1
epbm_add_peel_towers_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.1 }
	}
}

epbm_remove_peel_towers_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# pest_house_maintenance
# Used by: pest_house
# Goods: fiber_crops 0.1, incense 0.1
epbm_add_pest_house_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fiber_crops } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fiber_crops)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:incense } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:incense)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:incense value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:incense value = 0.1 }
	}
}

epbm_remove_pest_house_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fiber_crops } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fiber_crops)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fiber_crops value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:incense } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:incense)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:incense value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# phanariot_district_maintenance
# Used by: phanariot_district
# Goods: masonry 0.2, lumber 0.2, sand 0.2
epbm_add_phanariot_district_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:sand } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:sand)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:sand value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:sand value = 0.2 }
	}
}

epbm_remove_phanariot_district_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:sand } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:sand)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:sand value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# pirate_tavern_maintenance
# Used by: pirate_tavern
# Goods: lumber 0.15, liquor 0.1
epbm_add_pirate_tavern_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.15 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.15 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:liquor } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:liquor)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = 0.1 }
	}
}

epbm_remove_pirate_tavern_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.15 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:liquor } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:liquor)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# polders_maintenance
# Used by: polders
# Goods: clay 0.5, tools 0.05
epbm_add_polders_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:clay } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:clay)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:clay value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:clay value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
}

epbm_remove_polders_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:clay } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:clay)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:clay value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# pomor_outpost_maintenance
# Used by: pomor_outpost
# Goods: lumber 0.1, tools 0.025
epbm_add_pomor_outpost_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.025 }
	}
}

epbm_remove_pomor_outpost_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# port_authority_maintenance
# Used by: archive_of_the_indies, port_authority
# Goods: naval_supplies 0.25, paper 0.5
epbm_add_port_authority_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
}

epbm_remove_port_authority_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# port_building_maintenance
# Used by: amsterdam_admiralty, friesland_admiralty, kilwan_shipwrights, rotterdam_admiralty, west_friesland_admiralty, zeeland_admiralty
# Goods: tar 0.2, naval_supplies 0.4, tools 0.1, lumber 0.2, stone 0.1
epbm_add_port_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
}

epbm_remove_port_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# pound_lock_canal_infrastructure_maintenance
# Used by: pound_lock_canal_infrastructure
# Goods: lumber 0.1, stone 0.05, tools 0.1
epbm_add_pound_lock_canal_infrastructure_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
}

epbm_remove_pound_lock_canal_infrastructure_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# protected_harbor_maintenance
# Used by: protected_harbor
# Goods: tar 0.1, tools 0.1, lumber 0.1, stone 0.2
epbm_add_protected_harbor_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.2 }
	}
}

epbm_remove_protected_harbor_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# pukara_maintenance
# Used by: pukara_building
# Goods: weaponry 0.05, stone 0.2
epbm_add_pukara_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.2 }
	}
}

epbm_remove_pukara_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# qalat_al_mashwar_maintenance
# Used by: qalat_al_mashwar
# Goods: cloth 1.0, jewelry 0.05, paper 1.0, fine_cloth 0.1
epbm_add_qalat_al_mashwar_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.1 }
	}
}

epbm_remove_qalat_al_mashwar_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# rahdar_maintenance
# Used by: rahdar
# Goods: lumber 0.2, masonry 0.2, weaponry 0.2
epbm_add_rahdar_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.2 }
	}
}

epbm_remove_rahdar_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# regimental_camp_maintenance
# Used by: regimental_camp
# Goods: firearms 1.0, leather 1.0, cloth 0.2, paper 0.4, weaponry 1.0
epbm_add_regimental_camp_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 1.0 }
	}
}

epbm_remove_regimental_camp_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# repaired_great_wall_of_china_maintenance
# Used by: repaired_great_wall_of_china
# Goods: lumber 0.1, weaponry 0.05, tools 0.05, stone 0.05, tar 0.01
epbm_add_repaired_great_wall_of_china_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.01 }
	}
}

epbm_remove_repaired_great_wall_of_china_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# republican_assembly_maintenance
# Used by: republican_assembly
# Goods: furniture 0.1, tools 0.1, glass 0.5, fine_cloth 0.5, books 0.1, goods_gold 0.1, marble 0.1
epbm_add_republican_assembly_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.1 }
	}
}

epbm_remove_republican_assembly_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# ribat_maintenance
# Used by: ribat
# Goods: masonry 0.1, weaponry 0.02, tar 0.02
epbm_add_ribat_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.02 }
	}
}

epbm_remove_ribat_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# ribeira_das_naus_maintenance
# Used by: ribeira_das_naus
# Goods: tar 0.25, naval_supplies 0.8, tools 0.15, lumber 0.2, stone 0.1
epbm_add_ribeira_das_naus_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.8 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.8 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.15 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.15 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.1 }
	}
}

epbm_remove_ribeira_das_naus_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.8 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.15 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# royal_atarazanas_seville_maintenance
# Used by: royal_atarazanas_seville
# Goods: tar 0.5, naval_supplies 1.0, tools 0.2, lumber 0.4, stone 0.24
epbm_add_royal_atarazanas_seville_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 0.24 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 0.24 }
	}
}

epbm_remove_royal_atarazanas_seville_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 0.24 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# royal_court_maintenance
# Used by: royal_court
# Goods: furniture 0.15, tools 0.05, glass 0.1, fine_cloth 0.2, books 0.1, goods_gold 0.1, marble 0.1
epbm_add_royal_court_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.15 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.15 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.1 }
	}
}

epbm_remove_royal_court_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.15 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# royal_garden_maintenance
# Used by: royal_garden
# Goods: furniture 0.1, tools 0.1, glass 0.1, fine_cloth 0.05, books 0.1, goods_gold 0.05, marble 0.05
epbm_add_royal_garden_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.05 }
	}
}

epbm_remove_royal_garden_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# royal_society_maintenance
# Used by: royal_society
# Goods: paper 1.0, books 0.5, marble 0.2, goods_gold 0.1, fine_cloth 0.2, furniture 0.2
epbm_add_royal_society_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = 0.2 }
	}
}

epbm_remove_royal_society_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:furniture } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:furniture)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:furniture value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# ruined_great_wall_of_china_maintenance
# Used by: ruined_great_wall_of_china
# Goods: lumber 0.1, weaponry 0.02, clay 0.02
epbm_add_ruined_great_wall_of_china_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:clay } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:clay)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:clay value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:clay value = 0.02 }
	}
}

epbm_remove_ruined_great_wall_of_china_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:clay } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:clay)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:clay value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# safaviyya_order_hall_maintenance
# Used by: safaviyya_order_hall
# Goods: weaponry 0.5, leather 0.5, cloth 0.1, paper 0.2, glass 0.1
epbm_add_safaviyya_order_hall_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.1 }
	}
}

epbm_remove_safaviyya_order_hall_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# sawmill_maintenance
# Used by: sawmill
# Goods: tools 0.05
epbm_add_sawmill_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
}

epbm_remove_sawmill_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# seljuk_mint_maintenance
# Used by: seljuk_mint
# Goods: paper 0.1, books 0.25, silver 0.1, copper 0.1
epbm_add_seljuk_mint_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:silver } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:silver)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:silver value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:silver value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:copper value = 0.1 }
	}
}

epbm_remove_seljuk_mint_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:silver } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:silver)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:silver value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# sevilla_bullfighting_school_maintenance
# Used by: sevilla_bullfighting_school
# Goods: livestock 0.5, tools 0.1
epbm_add_sevilla_bullfighting_school_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:livestock } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:livestock)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:livestock value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:livestock value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
}

epbm_remove_sevilla_bullfighting_school_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:livestock } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:livestock)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:livestock value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# shipyard_maintenance
# Used by: shipyard
# Goods: tar 0.8, naval_supplies 0.4, tools 0.8, lumber 0.8
epbm_add_shipyard_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.8 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.8 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.4 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.4 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.8 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.8 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.8 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.8 }
	}
}

epbm_remove_shipyard_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.8 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.4 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.8 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.8 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# smuggler_cove_maintenance
# Used by: smuggler_cove
# Goods: naval_supplies 0.05, lumber 0.1, liquor 0.05, paper 0.05
epbm_add_smuggler_cove_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:liquor } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:liquor)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.05 }
	}
}

epbm_remove_smuggler_cove_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:liquor } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:liquor)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:liquor value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# soldier_building_maintenance
# Used by: cantonments, segovia_artillery_academy
# Goods: firearms 0.5, leather 0.5, cloth 0.1, paper 0.2, weaponry 0.5
epbm_add_soldier_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
}

epbm_remove_soldier_building_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# star_fort_maintenance
# Used by: star_fort
# Goods: stone 1.0, firearms 1.0, cannons 1.0, tools 0.5, weaponry 1.0
epbm_add_star_fort_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:stone value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 1.0 }
	}
}

epbm_remove_star_fort_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:stone } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:stone)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:stone value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# stockade_maintenance
# Used by: stockade
# Goods: lumber 0.1, weaponry 0.02, tar 0.02
epbm_add_stockade_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.02 }
	}
}

epbm_remove_stockade_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# sufi_lodge_maintenance
# Used by: sufi_lodge
# Goods: paper 0.1, cloth 0.15, incense 0.05
epbm_add_sufi_lodge_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.15 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.15 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:incense } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:incense)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:incense value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:incense value = 0.05 }
	}
}

epbm_remove_sufi_lodge_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.15 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:incense } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:incense)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:incense value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# supreme_court_requirements
# Used by: supreme_court
# Goods: lumber 0.1, tools 0.1, glass 0.1, fine_cloth 0.1, books 0.1, paper 0.5, goods_gold 0.1
epbm_add_supreme_court_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.1 }
	}
}

epbm_remove_supreme_court_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# tambo_maintenance
# Used by: tambo
# Goods: wool 0.1, maize 0.05
epbm_add_tambo_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wool } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wool)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:wool value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:wool value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:maize } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:maize)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:maize value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:maize value = 0.05 }
	}
}

epbm_remove_tambo_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wool } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wool)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:wool value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:maize } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:maize)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:maize value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# tax_assessor_requirements
# Used by: tax_assessor
# Goods: tools 0.2, paper 1.0
epbm_add_tax_assessor_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
}

epbm_remove_tax_assessor_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# temple_maintenance
# Used by: delhi_tomb, great_temple_of_tenochtitlan, medical_school, ranganathaswamy_temple_building, temple, tibetan_great_monastery, venkateswara_temple, wat_chaiwatthanaram_temple_building
# Goods: glass 0.02, cloth 0.02, paper 0.02, copper 0.02, tools 0.01, beeswax 0.05
epbm_add_temple_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp add = 0.02 }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:copper value = 0.02 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.01 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.05 }
	}
}

epbm_remove_temple_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:copper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:copper)" }
		change_local_variable = { name = epbm_temp subtract = 0.02 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:copper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# terraces_maintenance
# Used by: terraces
# Goods: salt 0.1
epbm_add_terraces_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:salt value = 0.1 }
	}
}

epbm_remove_terraces_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# theater_maintenance
# Used by: teatro_san_cassiano, theater
# Goods: cloth 0.2, wine 0.2, paper 0.2, fine_cloth 0.05
epbm_add_theater_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wine } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wine)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:wine value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:wine value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.05 }
	}
}

epbm_remove_theater_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:wine } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:wine)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:wine value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# training_fields_maintenance
# Used by: training_fields
# Goods: firearms 0.5, leather 0.5, cloth 0.1, paper 0.2, weaponry 0.5
epbm_add_training_fields_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
}

epbm_remove_training_fields_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# tribes_of_galway_maintenance
# Used by: tribes_of_galway
# Goods: leather 0.01, cloth 0.01
epbm_add_tribes_of_galway_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:leather value = 0.01 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.01 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.01 }
	}
}

epbm_remove_tribes_of_galway_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:leather } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:leather)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:leather value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.01 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# tur_kodjabashi_office_maintenance
# Used by: tur_kodjabashi_office
# Goods: paper 1.0, weaponry 0.2, masonry 0.2
epbm_add_tur_kodjabashi_office_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = 0.2 }
	}
}

epbm_remove_tur_kodjabashi_office_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:masonry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:masonry)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:masonry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# university_maintenance
# Used by: university
# Goods: paper 0.5, books 0.25, glass 0.25, beeswax 0.05
epbm_add_university_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.05 }
	}
}

epbm_remove_university_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# usa_academy_of_arts_and_sciences_maintenance
# Used by: usa_academy_of_arts_and_sciences
# Goods: paper 1.0, books 0.25, glass 0.25, beeswax 0.05
epbm_add_usa_academy_of_arts_and_sciences_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.05 }
	}
}

epbm_remove_usa_academy_of_arts_and_sciences_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# usa_national_bank_maintenance
# Used by: usa_national_bank
# Goods: paper 1.0, goods_gold 1.0
epbm_add_usa_national_bank_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 1.0 }
	}
}

epbm_remove_usa_national_bank_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# usa_national_mint_maintenance
# Used by: usa_national_mint
# Goods: paper 1.0, goods_gold 1.0, silver 1.0
epbm_add_usa_national_mint_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:silver } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:silver)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:silver value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:silver value = 1.0 }
	}
}

epbm_remove_usa_national_mint_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:silver } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:silver)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:silver value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# usa_philosophical_society_maintenance
# Used by: usa_philosophical_society
# Goods: paper 1.5, books 0.5, glass 0.5, beeswax 0.1
epbm_add_usa_philosophical_society_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 1.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 1.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:glass value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = 0.1 }
	}
}

epbm_remove_usa_philosophical_society_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 1.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:glass } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:glass)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:glass value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:beeswax } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:beeswax)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:beeswax value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# venetian_arsenal_maintenance
# Used by: venetian_arsenal
# Goods: tar 0.5, naval_supplies 1.0, tools 0.2, lumber 1.0
epbm_add_venetian_arsenal_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 1.0 }
	}
}

epbm_remove_venetian_arsenal_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# venetian_palaces_maintenance
# Used by: venetian_palaces
# Goods: cloth 0.2, jewelry 0.05, paper 0.25, marble 0.1, fine_cloth 0.1
epbm_add_venetian_palaces_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:marble value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.1 }
	}
}

epbm_remove_venetian_palaces_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:jewelry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:jewelry)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:jewelry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:marble } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:marble)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:marble value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# war_college_requirements
# Used by: war_college
# Goods: tools 0.2, weaponry 0.5, firearms 0.5, fine_cloth 1.0, books 1.0, paper 2.0, cannons 0.25
epbm_add_war_college_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.2 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.2 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp add = 1.0 }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:books value = 1.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 2.0 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 2.0 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = 0.25 }
	}
}

epbm_remove_war_college_requirements = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.2 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:firearms } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:firearms)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:firearms value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:books } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:books)" }
		change_local_variable = { name = epbm_temp subtract = 1.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:books value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 2.0 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cannons } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cannons)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cannons value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# warehouse_maintenance
# Used by: market_warehouse
# Goods: lumber 0.1, tools 0.1, salt 0.1
epbm_add_warehouse_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:salt value = 0.1 }
	}
}

epbm_remove_warehouse_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:salt } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:salt)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:salt value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# wharf_maintenance
# Used by: wharf
# Goods: tar 0.1, naval_supplies 0.05, tools 0.1, lumber 0.1
epbm_add_wharf_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tar value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.1 }
	}
}

epbm_remove_wharf_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tar } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tar)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tar value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:naval_supplies } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:naval_supplies)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:naval_supplies value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# windmill_maintenance
# Used by: windmill
# Goods: tools 0.025, lumber 0.05, cloth 0.05
epbm_add_windmill_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.025 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.025 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = 0.05 }
	}
}

epbm_remove_windmill_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.025 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:lumber } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:lumber)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:lumber value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# wissel_bank_maintenance
# Used by: wisselbank
# Goods: paper 0.5, goods_gold 0.5, silver 0.5
epbm_add_wissel_bank_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = 0.5 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:silver } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:silver)" }
		change_local_variable = { name = epbm_temp add = 0.5 }
		add_to_variable_map = { name = epbm_maint key = goods:silver value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:silver value = 0.5 }
	}
}

epbm_remove_wissel_bank_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:goods_gold } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:goods_gold)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:goods_gold value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:silver } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:silver)" }
		change_local_variable = { name = epbm_temp subtract = 0.5 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:silver value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}

# zhixian_maintenance
# Used by: zhixian
# Goods: paper 0.25, weaponry 0.1, tools 0.05, fine_cloth 0.05
epbm_add_zhixian_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp add = 0.25 }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:paper value = 0.25 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp add = 0.1 }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = 0.1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:tools value = 0.05 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp add = 0.05 }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = 0.05 }
	}
}

epbm_remove_zhixian_maintenance = {
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:paper } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:paper)" }
		change_local_variable = { name = epbm_temp subtract = 0.25 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:paper value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:weaponry } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:weaponry)" }
		change_local_variable = { name = epbm_temp subtract = 0.1 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:weaponry value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:tools } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:tools)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:tools value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
	if = {
		limit = { has_variable_map = epbm_maint is_key_in_variable_map = { name = epbm_maint target = goods:fine_cloth } }
		set_local_variable = { name = epbm_temp value = "variable_map(epbm_maint|goods:fine_cloth)" }
		change_local_variable = { name = epbm_temp subtract = 0.05 }
		if = { limit = { local_var:epbm_temp < 0 } set_local_variable = { name = epbm_temp value = 0 } }
		add_to_variable_map = { name = epbm_maint key = goods:fine_cloth value = local_var:epbm_temp }
	}
	else = {
		set_variable = { name = epbm_needs_recalc value = 1 }
	}
}
